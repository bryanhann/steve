#!/usr/bin/env python3
import os
from pathlib import Path
from collections import defaultdict
PAD=' '*4
REPOS=Path(os.environ['STEVE_DST'])
PATHS=[Path(xx) for xx in os.environ['PATH'].split(':') ]

def bold(text): return "\033[1m" + text + "\033[0m"
TARGETS = []
for path in PATHS:
    TARGETS += [ xx for xx in path.glob('bch.*') if xx.is_file() ]
    TARGETS += [ xx for xx in path.glob('bch-*') if xx.is_file() ]
    TARGETS += [ xx for xx in path.glob('bh.*') if xx.is_file() ]
    TARGETS += [ xx for xx in path.glob('bh-*') if xx.is_file() ]
    TARGETS += [ xx for xx in path.glob('bh:*') if xx.is_file() ]
TARGEST = [xx for xx in TARGETS if xx.is_file() and xx.name.startswith('bch')]
ACC=defaultdict(lambda : list() )
for target in TARGETS:
    ACC[target.name].append(target)

print("""The bch command suite: """)
for (name,paths) in sorted(ACC.items()):
    print(f'{PAD}{bold(name)}')
    if len(paths)>1:
        print (f'{PAD*2}WARNING: DUPLICATES')
        for path in paths:
            print( f'{PAD*2}{path}' )
